<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Colombia Socioeconomic Vulnerability Map</title>
  <!-- Mapbox GL JS CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <h1>Colombia Socioeconomic Vulnerability Index</h1>
  </header>

  <div class="container">
    <!-- Container for Map -->
    <div id="map"></div>

    <!-- Sidebar for controls -->
    <div id="ui-container">
      <div class="panel">
        <h2>Vulnerability Index</h2>
        <p>Based on water access, education, and employment indicators</p>
        
        <div class="control-section">
          <h3>Selected Year: <span id="current-year">2019</span></h3>
          
          <!-- Time Slider -->
          <div id="slider-container">
            <input type="range" id="yearSlider" min="2007" max="2019" value="2019" step="1" />
            <div class="slider-labels">
              <span>2007</span>
              <span>2019</span>
            </div>
          </div>
        </div>

        <div class="control-section">
          <h3>Vulnerability Legend</h3>
          <div class="legend-container">
            <div id="vulnerability-bar">
              <!-- The gradient bar (green -> yellow -> red) -->
              <div id="bar-gradient"></div>
              <!-- The arrow/line pointer that moves on hover -->
              <div id="bar-indicator" style="display: none;">
                <div id="bar-indicator-line"></div>
                <span id="bar-indicator-value"></span>
              </div>
            </div>
            <div class="legend-labels">
              <span>High</span>
              <span>Low</span>
            </div>
          </div>
        </div>

        <div class="control-section">
          <h3>Map Layers</h3>
          <!-- Dengue Overlay Checkbox -->
          <div class="checkbox-container">
            <input type="checkbox" id="dengueOverlay" />
            <label for="dengueOverlay">Show Dengue Cases</label>
          </div>
          <!-- Vulnerability Components -->
          <div class="checkbox-container">
            <input type="checkbox" id="showComponents" />
            <label for="showComponents">Show Component Breakdown</label>
          </div>
        </div>

        <div class="control-section">
          <h3>Writeup</h3>
          <p> 1. What have you done so far? </p>

          <p>  So far we have refined our project idea, 
            now focusing on creating a visualization 
            that highlights the socio-economic vulnerabilities in Colombia.
            We are planning to create a composite of the education levels, 
            access to internet and water for 1121 municipalities in Colombia.
            We are using a mapbox, as well as geojson files for Colombia to 
            overlay the map and graphically visualize the regions. 
            We have planned to create a gradient toolbar on the side 
            that captures the composite of vulnerabilities for the specific 
            municipalities. The vulnerabilities will be based on aspects included 
            in the metadata, such as employment, water access, and internet access; 
            we plan on further developing this during the week. </p>
            
            <p> 2. What will be the most challenging of your project to design and why? </p>

            <p>
              The most challenging part of our project will be ensuring 
              the municipality is accurate when overlaying the geojson files
              with the mapbox. Another challenge will be defining an objective 
              formula for our composite “vulnerability index” of 4 features, 
              employment, water access, education levels, and internet access. 
              Filtering the municipalities on the map will also be challenging 
              because there's a lot of them; we are working with 1121 municipalities 
              of Columbia which can be overwhelming for the reader to look at in an 
              interactive visualization. The last big challenge we expect to face 
              is going to be animating the change in our vulnerability legend as 
              the user hovers over different municipalities. 
            </p>
        </div>


            <div id="municipality-info" class="control-section">
              <h3>Municipality Data</h3>
              <p class="info-message">Hover over a municipality to see details</p>
              <div id="municipality-details" style="display: none;">
                <h4 id="municipality-name">-</h4>
                <p>Population: <span id="municipality-population">-</span></p>
                <div class="vulnerability-score">
                  <span>Overall Vulnerability:</span>
                  <span id="vulnerability-score">-</span>
                </div>
                <div id="component-breakdown">
                  <div class="component">
                    <span>Water Access Vulnerability:</span>
                    <span id="water-score">-</span>
                  </div>
                  <div class="component">
                    <span>Education Vulnerability:</span>
                    <span id="education-score">-</span>
                  </div>
                  <div class="component">
                    <span>Employment Vulnerability:</span>
                    <span id="employment-score">-</span>
                  </div>
                </div>



          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mapbox GL JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <!-- PapaParse for CSV parsing -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <!-- Your JS Code -->
  <script src="script.js"></script>
</body>
</html>